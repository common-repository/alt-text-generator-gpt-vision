(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.i18n;function n(t,e={},n=document){let a=n.createElement(t);return Object.entries(e).forEach((([t,e])=>{null!=e&&("class"===t?Array.isArray(e)?a.classList.add(...e):"string"==typeof e&&a.classList.add(e):"text"===t?a.textContent=e:t in a?"object"!=typeof e||Array.isArray(e)?a[t]=e:Object.entries(e).forEach((([e,n])=>{a[t][e]=n})):a.setAttribute(t,e))})),a}const a=window.wp.apiFetch;var r=t.n(a);const{wp:s}=window;s.media.view.Attachment.Details=s.media.view.Attachment.Details.extend({render:function(){if(s.media.view.Attachment.prototype.render.apply(this,arguments),"image"!==this.model.get("type"))return this;const{el:t}=this,a=function(t,e=document){return e.querySelector(t)}(".attachment-details .setting.alt-text",t);if(!a)return this;const i=((t,a,s)=>{const i=n("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",clear:"both",gap:"1em"}}),o=n("span",{class:"spinner",style:{margin:"0"}});i.append(o);const l=n("button",{class:"button",text:(0,e.__)("Generate Alt Text","alt-text-generator-gpt-vision"),onclick:async n=>{if(n.preventDefault(),!s?.length||confirm((0,e.__)("Are you sure you want to overwrite the current alt text?","alt-text-generator-gpt-vision")))try{o.classList.add("is-active"),l.disabled=!0;const e=await(async(t,e=!1,n,a)=>{const s={attachment_id:t,save:e};return n?.length&&(s.user_prompt=n),r()({path:"acpl/ai-alt-generator",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),signal:a}).then((t=>t.alt)).catch((t=>{throw console.error(t),t}))})(t);a(e)}catch(t){alert((0,e.sprintf)((0,e.__)("There was an error generating the alt text: %s","alt-text-generator-gpt-vision"),t.message))}finally{o.classList.remove("is-active"),l.disabled=!1}}});return i.append(l),i})(this.model.get("id"),(t=>{this.model.set("alt",t),this.render(),this.model.save()}),this.model.get("alt"));return a.after(i),this}})})();
//# sourceMappingURL=media-modal.js.map